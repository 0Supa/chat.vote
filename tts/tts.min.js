let synth,username,client,cid="qn0wimnszbqlwfnszdz3wwfz430eqr";function connect(){username=document.getElementById("username").value;let n={options:{clientId:cid,debug:!1},connection:{secure:!0,reconnect:!0},channels:[username]};console.log(`tmi connection options: ${n}`),client=new tmi.client(n),client.on("message",(function(n,e,t,c){let s=t.trim(),o=DOMPurify.sanitize(s,{ALLOWED_URI_REGEXP:/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|xxx):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i}),i=o.substring(5);o.startsWith("!donk")&&speakMessage(i)})),client.on("timeout",(function(n,e,t,c,s){})),client.on("connected",(async function(n,e){console.log(`* Connected to ${n}:${e}`),document.getElementById("status").innerHTML=`<h4><span class="badge bg-success">Connected to ${username} :)</span></h4>`})),client.on("disconnected",(function(n){console.log(n)})),client.connect().catch(console.error)}function speakMessage(n){let e=new SpeechSynthesisUtterance(n);synth.speak(e)}synth=window.speechSynthesis;