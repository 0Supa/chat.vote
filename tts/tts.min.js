let synth,username;function connect(){username=document.getElementById("username").value;let e={options:{clientId:CLIENT_ID,debug:!1},connection:{secure:!0,reconnect:!0},channels:[username]};console.log(`tmi connection options: ${e}`);const n=new tmi.client(e);n.on("message",(function(e,n,t,s){let o=t.trim(),c=DOMPurify.sanitize(o,{ALLOWED_URI_REGEXP:/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|xxx):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i}),i=c.substring(5);c.startsWith("!donk")&&speakMessage(i)})),n.on("timeout",(function(e,n,t,s,o){})),n.on("connected",(async function(e,n){console.log(`* Connected to ${e}:${n}`),document.getElementById("status").innerHTML=`<h4><span class="badge bg-success">Connected to ${username} :)</span></h4>`})),n.on("disconnected",(function(e){console.log(e)})),n.connect().catch(console.error)}function speakMessage(e){let n=new SpeechSynthesisUtterance(e);synth.speak(n)}synth=window.speechSynthesis;