let client,synth,username;function connect(){username=document.getElementById("username").value;let e={options:{clientId:CLIENT_ID,debug:!1},connection:{secure:!0,reconnect:!0},channels:[username]};console.log(`tmi connection options: ${e}`),client=new tmi.client(e),client.on("message",(function(e,n,t,c){let s=t.trim(),o=DOMPurify.sanitize(s,{ALLOWED_URI_REGEXP:/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|xxx):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i}),i=o.substring(5);o.startsWith("!donk")&&speakMessage(i)})),client.on("timeout",(function(e,n,t,c,s){})),client.on("connected",(async function(e,n){console.log(`* Connected to ${e}:${n}`),document.getElementById("status").innerHTML=`<h4><span class="badge bg-success">Connected to ${username} :)</span></h4>`})),client.on("disconnected",(function(e){console.log(e)})),client.connect().catch(console.error)}function speakMessage(e){let n=new SpeechSynthesisUtterance(e);synth.speak(n)}synth=window.speechSynthesis;